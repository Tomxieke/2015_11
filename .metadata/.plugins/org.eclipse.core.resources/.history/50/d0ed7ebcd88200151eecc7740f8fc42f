package test;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.example.mp3_player.R;

public class ViewPagerActivity extends Activity {
	private ViewPager mViewPager;
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.test_viewpager_layout);
		mViewPager = (ViewPager) findViewById(R.id.test_viewpager);
		
		LayoutInflater inflater = LayoutInflater.from(this);
		ArrayList<View> data = new ArrayList<View>();
		
		View v1 = inflater.inflate(R.layout.test_viewpager_item1, null);
		data.add(v1);
		data.add(v1);
		data.add(v1);
		MyPagerAdapter adapter = new MyPagerAdapter();
		mViewPager.setAdapter(adapter);
		adapter.setData(data);
		
		
	}
	
	
	
	
	public class MyPagerAdapter extends PagerAdapter {
		private ArrayList<View> data = new ArrayList<View>();
		public void setData(ArrayList<View> data) {
			this.data = data;
			notifyDataSetChanged();
		}
		@Override
		public int getCount() {
			return Integer.MAX_VALUE;
		}

		@Override
		public boolean isViewFromObject(View arg0, Object arg1) {
			return arg0 == arg1;
		}

		@Override
		public void destroyItem(ViewGroup container, int position, Object object) {
			
		}

		@Override
		public Object instantiateItem(ViewGroup container, int position) {
			position = position % data.size();  // 0%3=0,1%3=1,2%3=2,3%3=0,4%3=1,5%3=2,6%3=0,........
			
			View v = data.get(position);
			if(v.getParent() != null){
				container.removeView(v);
			}
			container.addView(v);
			return v;
		}
	}
}
